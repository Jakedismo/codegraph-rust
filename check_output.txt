warning: profiles for the non root package will be ignored, specify profiles at the workspace root:
package:   /Users/jokkeruokolainen/Documents/Solita/Ouroboros/ouroboros-codegraph-rust/codegraph-rust/crates/codegraph-napi/Cargo.toml
workspace: /Users/jokkeruokolainen/Documents/Solita/Ouroboros/ouroboros-codegraph-rust/codegraph-rust/Cargo.toml
warning: unused import: `super::*`
 --> crates/codegraph-vector/tests/rag_tests.rs:3:9
  |
3 |     use super::*;
  |         ^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused import: `NodeId`
 --> crates/codegraph-vector/tests/rag_tests.rs:4:46
  |
4 | ...CodeNode, Language, NodeId, NodeType};
  |                        ^^^^^^

warning: unused import: `QueryResult`
 --> crates/codegraph-vector/tests/rag_tests.rs:5:33
  |
5 |     use codegraph_vector::rag::{QueryResult, RAGC...
  |                                 ^^^^^^^^^^^

warning: unused import: `tokio_test`
 --> crates/codegraph-vector/tests/rag_tests.rs:7:9
  |
7 |     use tokio_test;
  |         ^^^^^^^^^^

warning: unused import: `super::*`
   --> crates/codegraph-vector/tests/rag_tests.rs:273:9
    |
273 |     use super::*;
    |         ^^^^^^^^

warning: unused import: `tokio_test`
   --> crates/codegraph-vector/src/consistency.rs:860:9
    |
860 |     use tokio_test;
    |         ^^^^^^^^^^
    |
    = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused import: `tokio_test`
   --> crates/codegraph-vector/src/incremental.rs:927:9
    |
927 |     use tokio_test;
    |         ^^^^^^^^^^

warning: unused import: `CodeGraphError`
 --> crates/codegraph-vector/tests/model_optimization_tests.rs:2:22
  |
2 | use codegraph_core::{CodeGraphError, Result};
  |                      ^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused imports: `OptimizationResult` and `QuantizedBatch`
 --> crates/codegraph-vector/tests/model_optimization_tests.rs:5:5
  |
5 |     OptimizationResult, ParallelConfig, QuantizationConfig, QuantizationMethod, QuantizedBatch,
  |     ^^^^^^^^^^^^^^^^^^                                                          ^^^^^^^^^^^^^^

warning: unused import: `tokio_test`
 --> crates/codegraph-vector/tests/model_optimization_tests.rs:9:5
  |
9 | use tokio_test;
  |     ^^^^^^^^^^

warning: fields `quantization_bits`, `compression_ratio`, and `accuracy_threshold` are never read
  --> crates/codegraph-vector/tests/model_optimization_tests.rs:16:9
   |
13 | struct OptimizationTestConfig {
   |        ---------------------- fields in this struct
...
16 |     pub quantization_bits: u8,
   |         ^^^^^^^^^^^^^^^^^
17 |     pub compression_ratio: f32,
   |         ^^^^^^^^^^^^^^^^^
18 |     pub accuracy_threshold: f32,
   |         ^^^^^^^^^^^^^^^^^^
   |
   = note: `OptimizationTestConfig` has derived impls for the traits `Clone` and `Debug`, but these are intentionally ignored during dead code analysis
   = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

    Checking codegraph-vector v1.0.0 (/Users/jokkeruokolainen/Documents/Solita/Ouroboros/ouroboros-codegraph-rust/codegraph-rust/crates/codegraph-vector)
warning: `codegraph-vector` (test "rag_tests") generated 5 warnings (run `cargo fix --test "rag_tests" -p codegraph-vector` to apply 5 suggestions)
warning: `codegraph-vector` (lib test) generated 2 warnings (run `cargo fix --lib -p codegraph-vector --tests` to apply 2 suggestions)
warning: `codegraph-vector` (test "model_optimization_tests") generated 4 warnings (run `cargo fix --test "model_optimization_tests" -p codegraph-vector` to apply 3 suggestions)
error[E0432]: unresolved import `codegraph_vector::StorageStats`
 --> crates/codegraph-vector/tests/persistent_integration_tests.rs:7:9
  |
7 |         StorageStats, VectorOperation,
  |         ^^^^^^^^^^^^ no `StorageStats` in the root
  |
  = help: consider importing one of these structs instead:
          codegraph_vector::persistent::StorageStats
          codegraph_vector::storage::StorageStats

error[E0422]: cannot find struct, variant or union type `Range` in crate `codegraph_core`
  --> crates/codegraph-vector/tests/persistent_integration_tests.rs:33:44
   |
33 |                     range: codegraph_core::Range {
   |                                            ^^^^^ not found in `codegraph_core`
   |
help: consider importing one of these items
   |
 3 +     use std::collections::btree_map::Range;
   |
 3 +     use std::collections::btree_set::Range;
   |
 3 +     use std::ops::Range;
   |
 3 +     use std::range::Range;
   |
   = and 3 other candidates
help: if you import `Range`, refer to it directly
   |
33 -                     range: codegraph_core::Range {
33 +                     range: Range {
   |

error[E0422]: cannot find struct, variant or union type `Point` in crate `codegraph_core`
  --> crates/codegraph-vector/tests/persistent_integration_tests.rs:34:54
   |
34 |                         start_point: codegraph_core::Point { row: *id as usize, column: 0 },
   |                                                      ^^^^^ not found in `codegraph_core`

error[E0422]: cannot find struct, variant or union type `Point` in crate `codegraph_core`
  --> crates/codegraph-vector/tests/persistent_integration_tests.rs:35:52
   |
35 |                         end_point: codegraph_core::Point { row: *id as usize + 10, column: 0 },
   |                                                    ^^^^^ not found in `codegraph_core`

warning: unused import: `CompressionType`
 --> crates/codegraph-vector/tests/persistent_integration_tests.rs:5:9
  |
5 |         CompressionType, ConsistencyConfig, ConsistencyManager, IncrementalConfig,
  |         ^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused import: `tokio_test`
  --> crates/codegraph-vector/tests/persistent_integration_tests.rs:12:9
   |
12 |     use tokio_test;
   |         ^^^^^^^^^^

error[E0605]: non-primitive cast: `usize` as `uuid::Uuid`
  --> crates/codegraph-vector/tests/persistent_integration_tests.rs:22:18
   |
22 |                 (i as NodeId, vector)
   |                  ^^^^^^^^^^^ an `as` expression can only be used to convert between primitive types or to coerce to a specific trait object

error[E0560]: struct `codegraph_core::Location` has no field named `range`
  --> crates/codegraph-vector/tests/persistent_integration_tests.rs:33:21
   |
33 |                     range: codegraph_core::Range {
   |                     ^^^^^ `codegraph_core::Location` does not have this field
   |
   = note: available fields are: `line`, `column`, `end_line`, `end_column`

error[E0605]: non-primitive cast: `uuid::Uuid` as `usize`
  --> crates/codegraph-vector/tests/persistent_integration_tests.rs:34:67
   |
34 |                         start_point: codegraph_core::Point { row: *id as usize, column: 0 },
   |                                                                   ^^^^^^^^^^^^ an `as` expression can only be used to convert between primitive types or to coerce to a specific trait object

error[E0605]: non-primitive cast: `uuid::Uuid` as `usize`
  --> crates/codegraph-vector/tests/persistent_integration_tests.rs:35:65
   |
35 |                         end_point: codegraph_core::Point { row: *id as usize + 10, column: 0 },
   |                                                                 ^^^^^^^^^^^^ an `as` expression can only be used to convert between primitive types or to coerce to a specific trait object

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:162:13
    |
160 |         let mut new_store = PersistentVectorStore::new(
    |                             -------------------------- arguments to this function are incorrect
161 |             temp_dir.path().join("test_backup2.db"),
162 |             &backup_path,
    |             ^^^^^^^^^^^^ expected `PathBuf`, found `&PathBuf`
    |
note: associated function defined here
   --> /Users/jokkeruokolainen/Documents/Solita/Ouroboros/ouroboros-codegraph-rust/codegraph-rust/crates/codegraph-vector/src/persistent.rs:504:12
    |
504 |     pub fn new<P: AsRef<Path>>(storage_path: P, backup_path: P, dimension: usize) -> Result<Self> {
    |            ^^^
help: consider removing the borrow
    |
162 -             &backup_path,
162 +             backup_path,
    |

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:190:26
    |
190 |                 node_id: i,
    |                          ^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:211:26
    |
211 |                 node_id: i,
    |                          ^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:227:26
    |
227 |                 node_id: i,
    |                          ^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:259:25
    |
259 |                         node_id,
    |                         ^^^^^^^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:304:26
    |
304 |                 node_id: 1,
    |                          ^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:308:26
    |
308 |                 node_id: 2,
    |                          ^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:341:22
    |
341 |             node_id: 1,
    |                      ^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:346:22
    |
346 |             node_id: 1,
    |                      ^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:377:33
    |
377 |             .acquire_lock(txn1, 1, LockMode::Shared)
    |              ------------       ^ expected `Uuid`, found integer
    |              |
    |              arguments to this method are incorrect
    |
note: method defined here
   --> /Users/jokkeruokolainen/Documents/Solita/Ouroboros/ouroboros-codegraph-rust/codegraph-rust/crates/codegraph-vector/src/consistency.rs:402:18
    |
402 |     pub async fn acquire_lock(
    |                  ^^^^^^^^^^^^

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:383:33
    |
383 |             .acquire_lock(txn2, 1, LockMode::Shared)
    |              ------------       ^ expected `Uuid`, found integer
    |              |
    |              arguments to this method are incorrect
    |
note: method defined here
   --> /Users/jokkeruokolainen/Documents/Solita/Ouroboros/ouroboros-codegraph-rust/codegraph-rust/crates/codegraph-vector/src/consistency.rs:402:18
    |
402 |     pub async fn acquire_lock(
    |                  ^^^^^^^^^^^^

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:390:40
    |
390 |             manager.acquire_lock(txn2, 1, LockMode::Exclusive),
    |                     ------------       ^ expected `Uuid`, found integer
    |                     |
    |                     arguments to this method are incorrect
    |
note: method defined here
   --> /Users/jokkeruokolainen/Documents/Solita/Ouroboros/ouroboros-codegraph-rust/codegraph-rust/crates/codegraph-vector/src/consistency.rs:402:18
    |
402 |     pub async fn acquire_lock(
    |                  ^^^^^^^^^^^^

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:413:26
    |
413 |                 node_id: 10,
    |                          ^^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:417:26
    |
417 |                 node_id: 11,
    |                          ^^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:422:26
    |
422 |                 node_id: 12,
    |                          ^^ expected `Uuid`, found integer

error[E0277]: can't compare `uuid::Uuid` with `{integer}`
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:439:17
    |
439 |                 assert_eq!(*node_id, 12); // Should restore deleted item
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^ no implementation for `uuid::Uuid == {integer}`
    |
    = help: the trait `PartialEq<{integer}>` is not implemented for `uuid::Uuid`
help: the following other types implement trait `PartialEq<Rhs>`
   --> /Users/jokkeruokolainen/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/uuid-1.18.1/src/lib.rs:438:32
    |
438 | #[derive(Clone, Copy, Eq, Ord, PartialEq, PartialOrd)]
    |                                ^^^^^^^^^ `uuid::Uuid` implements `PartialEq`
    |
   ::: /Users/jokkeruokolainen/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/uuid-1.18.1/src/non_nil.rs:57:1
    |
 57 | impl PartialEq<NonNilUuid> for Uuid {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `uuid::Uuid` implements `PartialEq<uuid::non_nil::NonNilUuid>`

error[E0277]: can't compare `uuid::Uuid` with `{integer}`
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:450:17
    |
450 |                 assert_eq!(*node_id, 11);
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^ no implementation for `uuid::Uuid == {integer}`
    |
    = help: the trait `PartialEq<{integer}>` is not implemented for `uuid::Uuid`
help: the following other types implement trait `PartialEq<Rhs>`
   --> /Users/jokkeruokolainen/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/uuid-1.18.1/src/lib.rs:438:32
    |
438 | #[derive(Clone, Copy, Eq, Ord, PartialEq, PartialOrd)]
    |                                ^^^^^^^^^ `uuid::Uuid` implements `PartialEq`
    |
   ::: /Users/jokkeruokolainen/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/uuid-1.18.1/src/non_nil.rs:57:1
    |
 57 | impl PartialEq<NonNilUuid> for Uuid {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `uuid::Uuid` implements `PartialEq<uuid::non_nil::NonNilUuid>`

error[E0277]: can't compare `uuid::Uuid` with `{integer}`
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:458:17
    |
458 |                 assert_eq!(*node_id, 10); // Should delete inserted item
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^ no implementation for `uuid::Uuid == {integer}`
    |
    = help: the trait `PartialEq<{integer}>` is not implemented for `uuid::Uuid`
help: the following other types implement trait `PartialEq<Rhs>`
   --> /Users/jokkeruokolainen/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/uuid-1.18.1/src/lib.rs:438:32
    |
438 | #[derive(Clone, Copy, Eq, Ord, PartialEq, PartialOrd)]
    |                                ^^^^^^^^^ `uuid::Uuid` implements `PartialEq`
    |
   ::: /Users/jokkeruokolainen/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/uuid-1.18.1/src/non_nil.rs:57:1
    |
 57 | impl PartialEq<NonNilUuid> for Uuid {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ `uuid::Uuid` implements `PartialEq<uuid::non_nil::NonNilUuid>`

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:476:26
    |
476 |                 node_id: i,
    |                          ^ expected `Uuid`, found integer

error[E0308]: mismatched types
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:546:26
    |
546 |                 node_id: i,
    |                          ^ expected `Uuid`, found integer

warning: unused variable: `expected_vector`
  --> crates/codegraph-vector/tests/persistent_integration_tests.rs:89:23
   |
89 |         for (node_id, expected_vector) in &test_vectors[0..5] {
   |                       ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_expected_vector`
   |
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `batch`
   --> crates/codegraph-vector/tests/persistent_integration_tests.rs:584:13
    |
584 |         for batch in 0..num_batches {
    |             ^^^^^ help: if this is intentional, prefix it with an underscore: `_batch`

Some errors have detailed explanations: E0277, E0308, E0422, E0432, E0560, E0605.
For more information about an error, try `rustc --explain E0277`.
warning: `codegraph-vector` (test "persistent_integration_tests") generated 4 warnings
error: could not compile `codegraph-vector` (test "persistent_integration_tests") due to 28 previous errors; 4 warnings emitted
